{% extends "section.html" %} {% block content %}
<main class="main">
  <h1>News</h1>
  <details class="recent" open>
    <summary><h2 class="no-margin">最近关注的新闻/话题：</h2></summary>
    <ol class="cards">
      {% set recent_pages = section.pages | sort(attribute="date", reverse=true) %} {% for page in recent_pages | slice(start=0, end=5) %}
      <li class="card">
        <article class="profile">
          <header>
            <h4 class="no-margin">{{ page.title }}</h4>
            <time>{{ page.date | date(format="%Y-%m-%d") }}</time>
          </header>
          <p>{{ page.content | safe }}</p>
          <footer><a href="{{ page.extra.original_url }}" target="_blank" rel="noopener noreferrer">阅读原文>>></a></footer>
        </article>
      </li>
      {% endfor %}
    </ol>
  </details>

  <details class="tags" open>
    <summary><h2 class="no-margin">按<span>标签</span>查看：</h2></summary>
    {% set tags = get_taxonomy(kind="news_tags") %}
    <ol>
      {% for tag in tags.items %}
      <li>
        <details>
          <summary><h3 class="no-margin">{{ tag.name }}({{ tag.pages | length }})</h3></summary>
          <ol class="cards">
            {% for page in tag.pages %}
            <li class="card">
              <article class="profile">
                <header>
                  <h4 class="no-margin">{{ page.title }}</h4>
                  <time>{{ page.date | date(format="%Y-%m-%d") }}</time>
                </header>
                <p>{{ page.content | safe }}</p>
                <footer><a href="{{ page.extra.original_url }}" target="_blank" rel="noopener noreferrer">阅读原文>>></a></footer>
              </article>
            </li>
            {% endfor %}
          </ol>
        </details>
      </li>
      {% endfor %}
    </ol>
  </details>
</main>

{% endblock content %}
